<!-- 담당: 세린 -->

# CI/CD (지속적 통합과 지속적 배포)
![개발과정](https://images.velog.io/images/anjaekk/post/a8ee64b9-9a05-4416-8d21-8e219a4ec2d3/image.png)

## 1. CI/CD란 무엇인가요?
**👉 코드를 작성한 이후 테스트부터 빌드, 머지, 배포까지의 과정을 자동화하여 효율적이고 효과적으로 서비스를 제공하는 방법을 말한다.**

### CI(Continuous Integration) : 지속적 통합
: 개발자가 수정한 코드를 정기적으로 빌드, 테스트해 공유 리포지토리에 병합하는 것!
### CD(Continuous Delivery) : 지속적 제공
: 개발자의 변경 사항을 리포지토리에서 고객이 사용 가능한 프로덕션 환경까지 자동으로 릴리스하는 것!
(코드가 정상적으로 배포가 가능한지 검증하고(Prepare Release) 검증이 완료되면 수동으로 배포)
### CD(Continuous Deployment) : 지속적 배포
: 개발자의 변경 사항을 리포지토리에서 고객이 사용 가능한 프로덕션 환경까지 자동으로 릴리스한 뒤 자동으로 배포하는 것!
![CI/CD](https://www.redhat.com/cms/managed-files/styles/wysiwyg_full_width/s3/ci-cd-flow-desktop_edited_0.png?itok=TzgJwj6p)

## 2. CI/CD는 왜 필요 또는 중요한가요?

**👉 사용자에게 더 많은 가치를 신속하고 효율적으로 전달하기 위해서!!**
- *"오늘날과 같이 다차원으로 끊임없이 진화되고 있는 개발 환경을 고려할 때, 조직들의 가장 큰 과제 중 하나는 시장 변화 및 고객 요구에 신속하고 유연하게 대응할 수 있는 개발안을 구축하는 것이다."*
- *"개발 조직에서 배포 횟수는 비즈니스 요구를 충족시키는 역량과 비례한다. 스타트업처럼 비즈니스 요구가 자주 변하는 상황에서 사용자에게 더 많은 가치를 빠르게 제공하려면 배포는 자신감 있고 자연스럽게 이루어져야 한다."*

1️⃣ **신속하고 효율적인 서비스 개발 및 유지보수 가능**
    - 코드 변경,  빌드, 테스트, 운영 환경 릴리스에 대한 준비가 자동화되기 때문에 소프트웨어의 전달 효율이 상승하고 신속하게 실시 할 수 있다.
    - 고객에게 신속하고 빈번하게 업데이트를 배포하는 것이 가능하다. CD를 제대로 구현하면 개발자는 표준화 된 테스트 프로세스를 통과하여 배포 준비가 된 빌드 결과물을 항상 가지고 있는 셈이기 때문이다. 

2️⃣ **휴먼 에러 및 코드 충돌 방지**
    - CI(지속적 통합)를 성공적으로 구현할 경우 애플리케이션에 대한 새로운 코드 변경 사항이 정기적으로 빌드 및 테스트되어 공유 레포지토리에 통합되므로 여러 명의 개발자가 동시에 애플리케이션 개발과 관련된 코드 작업을 할 경우 서로 충돌할 수 있는 문제를 해결할 수 있다.
    - 휴먼 에러란 사람이 수동적으로 배포 과정을 진행하는 중에 생기는 실수들을 뜻한다. 배포 자동화를 통해 전체 배포 과정을 매번 일관되게 진행하는 구조를 설계하여 휴먼 에러 발생 가능성을 낮출 수 있다.

3️⃣ **버그를 신속하게 발견하고 대응**
    - 짧은 사이클로 통합을 반복하면서 통합시 발생된 오류를 신속하게 수정하여 개발팀은 통합된 소프트웨어를보다 신속하게 개발할 수 있다.
    (이전에는 각자 개발자가 작성한 코드를 합치고 난 후, 모두 모여서 빌드를 시작하고 나서야 문제점을 파악할 수 있었지만, 지속적 통합이 적용된 개발팀은 코드를 머지하기 전, 이미 빌드 오류나 테스트 오류를 확인하여 훨씬 더 효율적인 개발을 할 수 있게 된다.)
    - 잦은 테스트가 가능해 지기 때문에 개발 팀에서는 버그가 나중에 큰 문제로 발전하기 전에 발견하고 해결할 수 있다.
    (테스트의 빈도를 높이고 내용을 충실하게하여 나중에 큰 문제로 발전하기 전에 버그를 조기에 발견하고 해결할 수 있다. 또한 지속적인 딜리버리 (CD)에 의해 전체 프로세스가 자동화되기 때문에 자신의 코드에 추가적인 종류의 테스트를 쉽게 수행 할 수 있다.)

4️⃣ **개발 생산성 향상**
    - 수동적이고 반복적인 배포 과정을 자동화함으로써 시간이 절약된다. 
    - 개발자를 수작업으로 부터 벗어나게 함으로써 개발 팀의 생산성을 향상된다.
    - 오류를 일찍 발결하여 적은 비용으로 해결할 수 있게 되기 때문에 품질 좋은 소프트웨어 개발로 이어질 수 있다.
    ==> 시간, 돈, 인적자원 모두 절약할 수 있어서 생산성이 향상된다!

## 3. CI/CD를 어떻게 구현할 수 있나요?
: 다양한 CI/CD를 위한 툴을 이용할 수 있다.
ex) `Jenkins`, `CircleCI`, `TeamCity`, `Bamboo`, `GitLab` 등등

👉 그 중에서 우리가 사용해본 방법은 `GitHub Actions`이다.
`GitHub Actions`는 Github가 공식적으로 제공하는 빌드, 테스트 및 배포 파이프라인을 자동화할 수 있는 CI/CD 플랫폼 (개발 워크 플로우 자동화 툴)이다.
Github에게 YAML파일로 정의한 자동화 동작을 전달하면, Github Actions는 해당 파일을 기반으로 그대로 실행시킨다. 

### CI/CD 구현 사례 🏢
**- < 뱅크샐러드 >**
    **😓pain points**
    - 하나의 기능을 배포하는 데 있어서 무려 5번의 branch switching이 필요하고, 6번의 Pull Request와 이에 따른 6번의 Code Review가 필요했다.
    - 복잡한 프로세스로 인해 간단한 수정 사항의 경우 develop branch에 merge 한 뒤 배포하지 않는 일이 종종 발생하기 시작했고, 이런 배포되지 않은 변경 사항이 쌓이면서 나중에 필요할 때 한 번에 너무 많은 변경사항을 포함한, 부담스러운 배포를 진행해야만 했다.
    - 서비스를 새로 배포하기 위해선 기존 배포 서비스의 소스 코드를 직접 수정해야 했고, 이로 인해 설정 오류 등의 human fault가 많이 발생할 수밖에 없었다.
    **😎CI/CD 구현**
    => 하루에도 수많은 사용자 경험을 개선하기 위해 수많은 커밋을 배포해야 하는 조직에 맞는 배포 정책이 필요해졌다!!
    ![뱅크샐러드 배포과정 변화](https://blog.banksalad.com/static/c1544846769d0f596111ee6c09499927/c83ae/mermaid-chart-2.png)
    - `GitHub Actions`를 활용하여 CI, CD를 위한 2가지 workflow를 생성했다.
    **😊resolve**
    ![뱅크샐러드 배포횟수 변화](https://blog.banksalad.com/static/41c3d75afbcdf151c0627442908ab95c/0a47e/chart.png)
    - 결과적으로 새로운 배포 프로세스로 인해 기존에 대비하여 4배 이상의 배포를 하게 되는 성과를 이뤘다고 한다.

**- < 라인 >**
    **😓pain points**
    - 릴리즈 과정을 모두 수동으로 조작하고 있었는데, 이러한 작업을 진행할 때 항상 긴장해야 하기 때문에 릴리스 담당자나 고객 대응 팀의 피로도가 증가했다.
    - 작업이 누락되는 상황이 발생했다. 또한 장애가 발생하지 않으면 누락 사실을 인지하기 어려운 작업들을 놓칠 수 있는 가능성도 존재했다.
    - 릴리스 관련 업무를 추가하거나 변경할 때 부담이 되었다.
    **😎CI/CD 구현**
    - 오류 수집 시스템의 알람 업데이트부터 서드 마켓 배포와 알람까지 순차적으로 자동으로 실행되도록 작업을 구성해서 연결했다.
    - 마켓에서 공개한 API를 이용해 주기적으로 데이터를 조회하는 방식으로 릴리스 상태를 모니터링하는 작업을 만든 뒤,마켓 내 배포와 동시에 자동으로 기존  작업들이 실행될 수 있게 구성하고 연결했다. 
    **😊resolve**
    - 릴리스 담당자가 본래 수행해야 하는(배포가 시작되면 상황적 오류를 빠르게 인지해 유관 부서와 협의 후 릴리스 중단 여부를 검토해야 하는) 업무에 집중할 수 있게 되었다.
    - 실수로 작업을 누락하는 것을 방지해 주었고, 단순 작업에서 벗어나게 되었으며, 업무의 신뢰도를 높여주었다.
    - 새로운 작업을 부담 없이 추가할 수 있게 되었다.(CI 시스템에 연관된 데이터나 설정을 업데이트하는 작업과 마켓에 배포된 경우 코드 리뷰어 수를 늘려서 패치 버전 개발 시 리뷰 정책을 강화하는 자동화 작업을 추가할 수 있었다)

---
Reference <br/>
- [CI/CD(지속적 통합/지속적 제공): 개념, 방법, 장점, 구현 과정](https://www.redhat.com/ko/topics/devops/what-is-ci-cd)<br/>
- [Github Actions를 이용해 CI/CD 파이프라인 구성하기](https://hwasurr.io/git-github/github-actions/)<br/>
- [데브옵스에 날개 달기, CI/CD를 100% 활용하는 방법](http://ebook.pldworld.com/_eBook/IDG%20Tech%20Library/'%EB%8D%B0%EB%B8%8C%EC%98%B5%EC%8A%A4%EC%97%90%20%EB%82%A0%EA%B0%9C%20%EB%8B%AC%EA%B8%B0'%20CI%EF%BC%8FCD%EB%A5%BC%20100%25%20%ED%99%9C%EC%9A%A9%ED%95%98%EB%8A%94%20%EB%B0%A9%EB%B2%95%20-%20IDG%20Summary/Mousoft_Summary_CI_CD_20190523.pdf)<br/>
- [라인-CI/CD 자동화가 가져다 준 행복](https://engineering.linecorp.com/ko/blog/ci-cd-automation)<br/>
- [뱅크샐러드-하루에 1000번 배포하는 조직 되기](https://blog.banksalad.com/tech/become-an-organization-that-deploys-1000-times-a-day/)<br/>
